(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{15:function(e,t,a){},22:function(e,t,a){},23:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a.n(c),n=a(10),i=a.n(n),o=(a(15),a(3)),r=a(4),l=a(2),u=a(6),d=a(5);var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:String,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number,c=["celcius","fahreneheit","kelvin"];return"number"===typeof a&&(!(!c.includes(e)||!c.includes(t))&&(e===t?a:("celcius"===e?"fahrenheit"===t?1.8*a+32:a+273.15:"fahrenheit"===e?"celcius"===t?(a-32)/1.8:(a-32)/1.8+273.15:"celcius"===t?a-273.15:1.8*(a-273.15)+32).toFixed(0)))};var h=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:String,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number,s=["full_date","month_year","weekday","HH","HHMM","HHMMSS","HH:MM","HH:MM:SS","H:MM_APM","H:MM:SS_APM","H_APM"],n=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=new Date(1e3*a),r=c?new Date(o.getTime()+6e4*o.getTimezoneOffset()+1e3*c):o,l=r.getDate(),u=n[r.getMonth()+1],d=r.getFullYear(),m=i[r.getDay()],h=r.getHours()<10?"0"+r.getHours():r.getHours(),j=r.getHours(),y=r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes(),f=r.getSeconds(),p=j<12?j:j-12,b=j<12?"am":"pm";if(!s.includes(t))return!1;switch(t){case"full_date":e="".concat(l," ").concat(u," ").concat(d);break;case"month_year":e="".concat(u," ").concat(d);break;case"weekday":e="".concat(m);break;case"HH":e="".concat(j);break;case"HHMM":e="".concat(j).concat(y);break;case"HHMMSS":e="".concat(j).concat(y).concat(f);break;case"HH:MM":e="".concat(h,":").concat(y);break;case"HH:MM:SS":e="".concat(h,":").concat(y,":").concat(f);break;case"H:MM_APM":e="".concat(p,":").concat(y).concat(b);break;case"H:MM:SS_APM":e="".concat(p,":").concat(y,":").concat(f).concat(b);break;case"H_APM":e="".concat(p).concat(b)}return e},j=a(0);function y(e){return Object(j.jsxs)("div",{className:"hourlyItem",children:[Object(j.jsx)("p",{className:"hourlyItemTime",children:e.time}),Object(j.jsx)("i",{className:"hourlyItemIcon ".concat(e.icon)}),Object(j.jsxs)("p",{className:"hourlyItemTemp",children:[e.temp,Object(j.jsx)("span",{children:"\xb0"})]})]})}var f=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var c;return Object(o.a)(this,a),(c=t.call(this,e)).displayHourlyItem=function(e){var t=[],a={Clear:"fas fa-sun",Clouds:"fas fa-cloud",Rain:"fas fa-cloud-showers-heavy"};e||c.state.data.forEach((function(e,a){var c=0===a?"Now":e.time;t.push(Object(j.jsx)(y,{time:c,icon:"fas fa-cloud-showers-heavy",temp:e.temp},"hourlyitem-".concat(a)))})),e.forEach((function(e,s){var n=0===s?"Now":h("H_APM",e.dt,c.props.timezone_offset);t.push(Object(j.jsx)(y,{time:n,icon:a[e.weather[0].main],temp:m("kelvin","celcius",e.temp)},"hourlyItem-".concat(s)))})),c.setState({hourlyItem:t})},c.state={data:[{time:"Now",temp:23},{time:"1pm",temp:33},{time:"2pm",temp:30},{time:"3pm",temp:23},{time:"4pm",temp:20},{time:"5pm",temp:16},{time:"6pm",temp:33},{time:"7pm",temp:30},{time:"8pm",temp:23},{time:"9pm",temp:20},{time:"10pm",temp:16},{time:"11pm",temp:33},{time:"12am",temp:30},{time:"1am",temp:23},{time:"2am",temp:20},{time:"3am",temp:16},{time:"4am",temp:33},{time:"5am",temp:30},{time:"6am",temp:23},{time:"7am",temp:20},{time:"8am",temp:16}],hourlyItem:""},c.myRef=s.a.createRef(),c}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.displayHourlyItem(this.props.hourly)}},{key:"render",value:function(){return Object(j.jsx)("div",{id:"hourly",className:"hourly",children:this.state.hourlyItem})}}]),a}(s.a.Component);function p(e){return Object(j.jsxs)("div",{className:"dailyItem",children:[Object(j.jsx)("p",{className:"dailyItemWeekday",children:e.weekday}),Object(j.jsx)("i",{className:"dailyItemIcon ".concat(e.icon)}),Object(j.jsxs)("div",{className:"dailyItemHighLow",children:[Object(j.jsxs)("p",{className:"dailyItemLow",children:[e.low,Object(j.jsx)("span",{children:"\xb0"})]}),Object(j.jsxs)("p",{className:"dailyItemHigh",children:[e.high,Object(j.jsx)("span",{children:"\xb0"})]})]})]})}var b=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var c;return Object(o.a)(this,a),(c=t.call(this,e)).displayItems=function(e){var t={Clear:"fas fa-sun",Clouds:"fas fa-cloud",Rain:"fas fa-cloud-showers-heavy"},a=[];if(!e)for(var s=0;s<7;s++)a.push(Object(j.jsx)(p,{weekday:c.state.weekday[s],icon:"fas fa-cloud-showers-heavy"},"dailyitem-".concat(s)));e.forEach((function(e,s){s>0&&a.push(Object(j.jsx)(p,{weekday:h("weekday",e.dt,c.props.timezone_offset),icon:t[e.weather[0].main],low:m("kelvin","celcius",e.temp.min),high:m("kelvin","celcius",e.temp.max)},"dailyitem-".concat(s)))})),c.setState({dailyItems:a})},c.state={data:[],weekday:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dailyItems:""},c}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.displayItems(this.props.daily)}},{key:"render",value:function(){return Object(j.jsx)("div",{id:"daily",className:"daily",children:this.state.dailyItems})}}]),a}(s.a.Component);function g(e){return Object(j.jsxs)("div",{className:"detailsItem",children:[Object(j.jsx)("i",{className:"detailsItemIcon ".concat(e.icon)}),Object(j.jsx)("p",{className:"detailsItemLabel",children:e.label}),Object(j.jsx)("p",{className:"detailsItemData",children:e.data})]})}function O(e){return Object(j.jsxs)("div",{id:"details",className:"details",children:[Object(j.jsx)(g,{icon:"fas fa-thermometer-half",label:"Feels like",data:"".concat(m("kelvin","celcius",e.item.feels_like),"\xb0")},"feelslike"),Object(j.jsx)(g,{icon:"fas fa-wind",label:"Wind",data:e.item.wind_speed},"wind"),Object(j.jsx)(g,{icon:"fas fa-tint",label:"Humidity",data:"".concat(e.item.humidity,"%")},"humidity"),Object(j.jsx)(g,{icon:"fas fa-tachometer-alt",label:"Pressure",data:e.item.pressure},"pressure"),Object(j.jsx)(g,{icon:"far fa-sun",label:"Sunrise",data:h("HH:MM",e.today.sunrise,e.timezone_offset)},"sunrise"),Object(j.jsx)(g,{icon:"far fa-moon",label:"Sunset",data:h("HH:MM",e.today.sunset,e.timezone_offset)},"sunset")]})}function v(e){return Object(j.jsxs)("div",{id:"summary",className:"summary",children:[Object(j.jsxs)("div",{id:"summaryIcon",className:"summaryIcon",children:[Object(j.jsx)("i",{className:"summaryIconIcon ".concat({day:{Atmosphere:"fas fa-smog",Clear:"fas fa-sun",Clouds:"fas fa-cloud",Drizzle:"fas fa-cloud-showers-heavy",Rain:"fas fa-cloud-showers-heavy",Snow:"fas fa-snowflake",Thunderstorm:"fas fa-bolt"},night:{Atmosphere:"fas fa-smog",Clear:"fas fa-moon",Clouds:"fas fa-cloud-moon",Drizzle:"fas fa-cloud-showers-heavy",Rain:"fas fa-cloud-showers-heavy",Snow:"fas fa-snowflake",Thunderstorm:"fas fa-bolt"}}[e.dayNight][e.item.weather[0].main])}),Object(j.jsx)("p",{className:"summaryIconDescription",children:e.item.weather[0].description})]}),Object(j.jsx)("div",{id:"summaryTemp",className:"summaryTemp",children:Object(j.jsxs)("p",{className:"summaryCurrentTemp",children:[m("kelvin","celcius",e.item.temp),Object(j.jsx)("span",{children:"\xb0"})]})}),Object(j.jsxs)("div",{id:"summaryHighLow",className:"summaryHighLow",children:[Object(j.jsxs)("div",{id:"summaryHigh",className:"summaryHighLowItem",children:[Object(j.jsx)("i",{className:"fas fa-long-arrow-alt-up"}),Object(j.jsxs)("p",{className:"summaryHighLowTemp",children:[m("kelvin","celcius",e.today.temp.max),Object(j.jsx)("span",{children:"\xb0"})]})]}),Object(j.jsxs)("div",{id:"summaryLow",className:"summaryHighLowItem",children:[Object(j.jsx)("i",{className:"fas fa-long-arrow-alt-down"}),Object(j.jsxs)("p",{className:"summaryHighLowTemp",children:[m("kelvin","celcius",e.today.temp.min),Object(j.jsx)("span",{children:"\xb0"})]})]})]})]})}var x=function(e){return Object(j.jsxs)("div",{id:"result",className:"result",children:[Object(j.jsx)(v,{item:e.result.current,today:e.result.daily[0],dayNight:e.dayNight},"summary"),Object(j.jsx)(O,{item:e.result.current,today:e.result.daily[0],timezone_offset:e.timezone_offset},"details"),Object(j.jsx)(f,{hourly:e.result.hourly,timezone_offset:e.timezone_offset},"hourly"),Object(j.jsx)(b,{daily:e.result.daily,timezone_offset:e.timezone_offset},"daily")]})};var w=function(e){e.city;var t,a=t=e.result.current.dt<e.result.current.sunrise||e.result.current.dt>e.result.current.sunset?"night":"day",c=e.result.current.weather[0].main,s=[],n="light rain"===e.result.current.weather[0].description?300:900,i=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)};["Rain","Thunderstorm"].includes(e.result.current.weather[0].main)&&function(){for(var e=0;e<n;e++){var a="day"===t?"background-rain-drop":"background-rain-drop-night",c={left:i(0,window.innerWidth),top:i(-1e3,window.innerHeight)};s.push(Object(j.jsx)("div",{id:"drop-".concat(e),className:a,style:c},"drop-".concat(e)))}}(),"night"===t&&"Clear"===e.result.current.weather[0].main&&function(){for(var e=0;e<250;e++){var t=Math.floor(Math.random()*window.innerWidth),a=Math.floor(Math.random()*window.innerHeight),c=10*Math.random(),n=1*Math.random(),i={left:t,top:a,width:1+n,height:1+n,animationDuration:"".concat(c,"s")};s.push(Object(j.jsx)("div",{id:"star-".concat(e),className:"background-night-star",style:i},"star-".concat(e)))}}();var o={day:{Clear:"background-clear-sunny",Clouds:"background-cloud",Rain:"background-rain",Thunderstorm:"background-rain"},night:{Clear:"background-clear-night",Clouds:"background-cloud-night",Rain:"background-rain-night",Thunderstorm:"background-rain-night"}}[a][c];return Object(j.jsxs)("div",{id:"main",className:"main",children:[Object(j.jsx)("div",{id:"background",className:"background ".concat(o),children:s}),Object(j.jsxs)("div",{id:"mainNav",className:"mainNav",children:[Object(j.jsx)("div",{id:"mainBtnHome",className:"mainBtnHome",onClick:function(){e.displayPage("home")},children:Object(j.jsx)("i",{className:"fas fa-undo-alt"})}),Object(j.jsx)("div",{id:"mainLocation",className:"mainLocation",children:Object(j.jsx)("h1",{children:e.cityname})})]}),Object(j.jsx)(x,{result:e.result,dayNight:t,timezone_offset:e.timezone_offset,collectData:e.collectData},"result")]})},N=a(7),k=a.n(N);function C(e){var t;switch(e.type){case"noResult":t="Opps. No result.";break;case"tooMany":t="Opps. There are too many results, please be more specific!";break;case"emptyEntry":t="Opps. You must search something!";break;default:t="Opps!"}return Object(j.jsx)("div",{id:"homeResultError",className:"homeResultError",children:Object(j.jsx)("div",{id:"homeResultErrorCon",className:"homeResultErrorCon",children:Object(j.jsx)("p",{children:t})})})}function S(e){return Object(j.jsxs)("div",{className:"cityResult",onClick:function(){return e.collectData("".concat(e.item.city_coord.latitude),"".concat(e.item.city_coord.longitude),"".concat(e.item.city_name))},children:[Object(j.jsxs)("div",{className:"cityResultInfo",children:[Object(j.jsxs)("h1",{className:"cityResultInfoH1",children:[e.item.city_name,", ",Object(j.jsx)("span",{className:"cityResultCountry",children:e.item.city_country})]}),Object(j.jsxs)("div",{className:"cityResultCoord",children:[Object(j.jsxs)("p",{className:"cityResultLat",children:["latitude: ",e.item.city_coord.latitude]}),Object(j.jsxs)("p",{className:"cityResultLon",children:["longitude: ",e.item.city_coord.longitude]})]})]}),Object(j.jsx)("div",{className:"cityResultInspect",children:Object(j.jsx)("i",{className:"fas fa-chevron-right"})})]})}function M(e){return Object(j.jsx)("div",{id:"homeResultContainer",className:"homeResultContainer",children:e.result})}function H(e){return Object(j.jsx)("div",{id:"homeResultLoading",className:"homeResultLoading",children:Object(j.jsx)("i",{className:"fas fa-spinner"})})}var I=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return Object(j.jsx)("div",{id:"homeSelectSearchCity",className:"homeSelectSearchCity",children:Object(j.jsx)("form",{id:"homeSelectSearchCityForm",className:"homeSelectSearchCityForm",onSubmit:function(t){return e.props.showResult(t)},children:Object(j.jsxs)("div",{className:"searchCityField","data-method":"cityname",children:[Object(j.jsx)("input",{id:"searchCityInput",type:"text",name:"cityname",autoComplete:"off",placeholder:"enter city name"}),Object(j.jsx)("button",{type:"submit",children:Object(j.jsx)("i",{className:"fas fa-search"})})]})})})}}]),a}(s.a.Component);function _(e){return Object(j.jsx)("div",{id:"homeSelect",className:"homeSelect",children:Object(j.jsxs)("ul",{id:"homeSelectMethod",className:"homeSelectMethod",children:[Object(j.jsx)("li",{className:"homeSelectMethodOption",onClick:function(){return e.handleSearchByCurrentLocation()},children:"Current Location"}),Object(j.jsx)("li",{className:"homeSelectMethodOption",onClick:function(){return e.openCloseSearchField()},children:"Search City"})]})})}function D(){return Object(j.jsx)("div",{id:"homeLogo",className:"homeLogo",children:Object(j.jsx)("h1",{className:"homeLogoH1",children:"G2Weather"})})}var R=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var c;return Object(o.a)(this,a),(c=t.call(this,e)).openCloseSearchField=function(){c.setState({isOpen:{searchField:!c.state.isOpen.searchField}}),document.querySelector("#searchCityInput").value=""},c.showResult=function(e){e.preventDefault(),c.setState({isOpen:{result:!c.state.isOpen.result},result:Object(j.jsx)(H,{},"homeselectsearchcity")}),"geocoords"===e.target.dataset.method||(c.getCity("cityname",e.target.cityname.value),e.target.cityname.value="")},c.handleSearchByCurrentLocation=function(){c.props.searchMethod("currentLocation"),c.getGeoData(),c.setState({isOpen:{result:!c.state.isOpen.result}})},c.getGeoData=function(){navigator.geolocation.getCurrentPosition(c.getGeoDataSuccess,c.getGeoDataError)},c.getGeoDataSuccess=function(e){c.getCity("geocoords",[e.coords.latitude,e.coords.longitude])},c.getGeoDataError=function(e){console.log("Error: ".concat(e))},c.displayResult=function(e){var t=[];return e.forEach((function(e,a){t.push(Object(j.jsx)(S,{item:e,collectData:c.props.collectData,setCity:c.props.setCity},"homeresult-".concat(a)))})),t},c.getCity=function(e,t){var a,s,n;"geocoords"===e?(a=t[0].toFixed(1),s=t[1].toFixed(1),n="https://gut2weather.herokuapp.com/api/get_cityname_geo/".concat(a,"/").concat(s)):n="https://gut2weather.herokuapp.com/api/get_cityname_get/".concat(t),fetch(n).then((function(e){return 404===e.status?c.setState({result:Object(j.jsx)(C,{type:"emptyEntry"},"homeresulterror")}):e.json()})).then((function(e){var t=e.error?e.error_message?Object(j.jsx)(C,{type:"tooMany"},"homeresulterror"):Object(j.jsx)(C,{type:"noResult"},"homeresulterror"):c.displayResult(e),a=Object(j.jsx)(M,{result:t},"homeresultcontainer");c.setState({result:a})})).catch((function(e){console.log(e)}))},c.state={isOpen:{searchField:!1,result:!1},result:Object(j.jsx)(H,{},"homeselectsearchcity"),paginator:{current:0,results:""}},c.handleSearchByCurrentLocation=c.handleSearchByCurrentLocation.bind(Object(l.a)(c)),c.openCloseSearchField=c.openCloseSearchField.bind(Object(l.a)(c)),c.showResult=c.showResult.bind(Object(l.a)(c)),c}return Object(r.a)(a,[{key:"render",value:function(){return Object(j.jsxs)("div",{id:"home",className:"home",children:[Object(j.jsx)(D,{},"homelogo"),Object(j.jsx)(_,{searchMethod:this.props.searchMethod,handleSearchByCurrentLocation:this.handleSearchByCurrentLocation,openCloseSearchField:this.openCloseSearchField},"homeSelect"),Object(j.jsx)(c.Fragment,{children:Object(j.jsx)(k.a,{open:this.state.isOpen.searchField,children:Object(j.jsx)(I,{showResult:this.showResult},"homeselectsearchcity")})}),Object(j.jsx)(c.Fragment,{children:Object(j.jsx)(k.a,{open:this.state.isOpen.result,children:this.state.result})})]})}}]),a}(s.a.Component);var L=function(e){return Object(j.jsx)("h1",{children:"LOADING..."})},F=(a(22),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var c;return Object(o.a)(this,a),(c=t.call(this,e)).getCookie=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),c=0;c<a.length;c++){var s=a[c].trim();if(s.substring(0,e.length+1)===e+"="){t=decodeURIComponent(s.substring(e.length+1));break}}return t},c.displayPage=function(e){var t;switch(e){case"home":t=Object(j.jsx)(R,{searchMethod:c.searchMethod,getCity:c.getCity,setCity:c.setCity,collectData:c.collectData,result:c.state.result,geodata:c.state.geodata},"home");break;case"loading":t=Object(j.jsx)(L,{},"loading");break;case"main":t=Object(j.jsx)(w,{cityname:c.state.cityname,result:c.state.main.result,timezone_offset:c.state.main.result.timezone_offset,displayPage:c.displayPage,collectData:c.collectData},"main");break;default:t=Object(j.jsx)(R,{searchMethod:c.searchMethod,getCity:c.getCity,setCity:c.setCity,collectData:c.collectData,result:c.state.result,geodata:c.state.geodata},"home")}c.setState({displayPage:t})},c.searchMethod=function(e){"currentLocation"===e&&navigator.geolocation.getCurrentPosition(c.getGeoDataSuccess,c.getGeoDataError),c.setState({geodata:{isLoading:!0}})},c.getGeoDataSuccess=function(e){c.setState({geodata:{latitude:e.coords.latitude,longitude:e.coords.longitude,isLoading:!1}})},c.getGeoDataError=function(e){console.log("Error: ".concat(e))},c.getCity=function(e){c.getCookie("csrftoken");fetch("https://gut2weather.herokuapp.com/api/get_cityname_get/".concat(e)).then((function(e){return e.json()})).then((function(e){c.setState({result:e})})).catch((function(e){console.log(e)})).then(console.log(c.state))},c.setCity=function(e){console.log("setCity: ".concat(e)),c.setState({cityname:e})},c.collectData=function(e,t,a){fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(e,"&lon=").concat(t,"&exclude=").concat("","&appid=").concat("81292baa61f67339affb10a09e0661d9")).then((function(e){return e.json()})).then((function(e){c.setState({isLoading:!1,cityname:a,main:{cityname:a,results:e,result:e}}),c.displayPage("main")}))},c.state={geodata:{latitude:"",longitude:"",isLoading:!0},result:"",isLoading:!0,displayPage:"",cityname:""},c.displayPage=c.displayPage.bind(Object(l.a)(c)),c.searchMethod=c.searchMethod.bind(Object(l.a)(c)),c.getCity=c.getCity.bind(Object(l.a)(c)),c.collectData=c.collectData.bind(Object(l.a)(c)),c.setCity=c.setCity.bind(Object(l.a)(c)),c}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.displayPage("home")}},{key:"render",value:function(){return Object(j.jsx)("div",{id:"App",className:"App",children:this.state.displayPage})}}]),a}(s.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(F,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.c463eb0f.chunk.js.map